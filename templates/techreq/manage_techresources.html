{% extends "base.html" %}

{% load form_display %}


{% block h1 %}Manage Tech Resources{% endblock %}
{% block title %}Manage Tech Resources{% endblock %}

{% block headextra %}<script type="text/javascript">
//<![CDATA[
    $(document).ready(function() {
    $('#techresource_table').dataTable({
                "bPaginate": false,
                "bJQueryUI": true,
                "aaSorting": [[0, "asc"]],
                "aoColumns": [
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
        ]
    });

    });

//]]></script>
{% endblock %}

{% block actions %}
<div id="actions">
    <h2 class="heading">Actions</h2>
    <ul>
        <li><a href="{% url techreq.views.techstaff_manage_techreqs %}">Satisfy Tech Requirements</a></li>
    </ul>
</div>
{% endblock %}

{% block subbreadcrumbs %}
<li>&gt; Manage Tech Resources</li>
{% endblock %}

{% block content %}
<div class="datatable_container">
    {% if techresources %}
        <table class="display" id="techresource_table">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Unit</th>
                    <th scope="col">Version</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Location</th>
                    <th scope="col">Notes</th>
                    <th scope="col">Action</th>
                </tr>
            </thead>
            {% for techresource in techresources %}
                <tr>
                    <td>{{ techresource.name }}</td>
                    <td>{{ techresource.unit }}</td>
                    <td>{{ techresource.version|default:"" }}</td>
                    <td>{{ techresource.quantity|default:"" }}</td>
                    <td>{{ techresource.location }}</td>
                    <td>{{ techresource.notes|default:"" }}</td>
                    <td class="miniaction">
                       
                     <form action="{% url techreq.views.manage_techresources %}" method="post">{% csrf_token %}
                        <p>      
                            <a href="{% url techreq.views.edit_techresources  techresource_id=techresource.id %}">Edit</a>
                            <input type="hidden" name="techresource_id" value="{{techresource.id}}" />
                            <input type="hidden" name="action" value="del" />
                            <input type="submit" value="Remove" onclick="return confirmSubmit('remove this Tech Resource')" />
                        </p>
                        </form>
                    </td>
                </tr>
              {% endfor %}
        </table>
    {% else %}
            <p>There are currently no tech resources.</p>
    {% endif %}
</div>

<div id="form_container">
    {% if form.non_field_errors %}
        <div class="errorindicator">
                 <img src="{{MEDIA_URL}}/icons/exclamation.png" alt="exclamation" />
                    {{ form.non_field_errors }}
        </div>
    {% endif %}
    <form action="{% url techreq.views.manage_techresources %}" method="post">
            {% csrf_token %}
        <fieldset>
            <legend>Add Tech Resources</legend>
            {{form|as_dl}}
            <input type="hidden" name="action" value="add" />
            <input class="submit" type="submit" value="Add Tech Resources" />
        </fieldset>
    </form>
</div>

{% endblock %}